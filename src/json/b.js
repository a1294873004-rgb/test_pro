const data = [
  {
    id: "1nfcEJKIT6",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "1nfcEJKIT6", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768275221833_0947ea52.jpg", "xywh": "[1532.2680411851372,1835.4929084514408,400,753.1111111111111]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768275221833_0947ea52.jpg", "prompt": "一位2D平面风格小丑女经典造型，双马尾造型，渐变染色，左侧马尾粉色波浪卷发，右侧马尾蓝色波浪卷发，发根为白金色/浅金色，蓝色发圈固定，两侧有细碎卷发垂落脸颊，精致可爱五官，大眼睛，蓝绿色瞳孔，右眼下方有黑色小丑泪滴装饰，粉蓝色眼影，甜美笑容露出牙齿，肤色白皙透亮，表情俏皮疯狂，红色金属光泽短款夹克，七分袖，开襟设计，内搭白色露脐T恤，印有\\"Daddy\'s Lil Monster\\"黑色字体，T恤上有红蓝菱形图案装饰，黑色亮片短裤，高腰设计，表面有金属质感，搭配黑色渔网袜，渔网有破损效果，金色蛇皮纹腰带，大号金色方形扣环，红蓝双色细节装饰，金色子弹链项圈，紧贴颈部，双手戴多层金色金属手镯/护腕，黑色渔网丝袜，左腿红色长筒袜套，右腿蓝色长筒袜套，红蓝不对称设计，正面站立，双臂自然张开向外，身体略微前倾，充满活力和挑衅感，自信张扬，哥特式建筑内部，高大拱形门窗，昏暗氛围，两侧有燃烧的蜡烛提供暖光，远处有雕像剪影，空中飘落羽毛或雪花，顶部聚光灯打亮角色，强烈的明暗对比，电影级lighting，戏剧性氛围，红蓝白金黑为主色调，高饱和度，经典小丑女配色，美漫电影级质感，反派英雄美学，疯狂甜美风格。", "rotate": 0, "slotId": "image-y5380oot", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_appearance_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "5c216058-3d2a-4602-8b85-4a8d94aa88a8",
  },
  {
    id: "ATH5s_d1RN",
    parentId: "Pev5SL_NkM",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "ATH5s_d1RN", "type": "block", "props": {"elements": {"type": "$blocksuite:internal:native$", "value": {}}}, "flavour": "affine:surface", "version": 5}',
    nodeId: null,
  },
  {
    id: "At9wJ5k8fp",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "At9wJ5k8fp", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/images/oc_reference/1768273034493_b95a786b.jpg", "xywh": "[-535.1615572234521,2682.6578095185264,400,442]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "images/oc_reference/1768273034493_b95a786b.jpg", "prompt": "请根据我上传的图片，将图片中人物的表情替换成参考表情嘟嘴。一只眼睛睁开,另一只眼睛眨起,嘴巴向前嘟起呈圆形,整体呈现出撒娇、可爱的嘟嘴表情。保持其他元素不改变。\\n", "rotate": 0, "slotId": "image-hyvvzmns", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_expression_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "00c57d44-d975-4e65-a010-df1cce91ecce",
  },
  {
    id: "AuZaZA_qrg",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "AuZaZA_qrg", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768284924328_1d4f0248.jpg", "xywh": "[2762.924601502771,1501.997989775704,400,753.1111111111111]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768284924328_1d4f0248.jpg", "prompt": "成熟男性魔王，厚涂漫画风格，暗黑奇幻，纯黑色长直发，发量浓密，向后梳理，部分披散肩头，发丝带暗紫光泽，邪魅俊美，猩红色发光眼睛，眼白全黑，细长眉毛，高挺鼻梁，薄唇，肤色苍白，额头有暗红色魔纹，表情冷酷残忍带邪笑；头顶长有黑色弯曲恶魔角，尖耳朵，颈部有暗纹蔓延，黑色高领长袍，金色和暗红色刺绣魔纹，肩部有尖刺装饰，黑色金属胸甲，腰部暗红腰带，长袍下摆飘逸，颈部戴骷髅项链，手指戴多个暗黑戒指发光，手掌释放暗红色暗影能量，周围环绕黑雾和灵魂碎片，眼睛流出暗红光痕，王座坐姿，身体前倾，一手撑脸颊，一手向前伸展释放魔法，表情轻蔑。暗黑王座大殿，石柱耸立，骷髅装饰，暗红火光，深黑、暗红、紫色阴影，邪恶氛围。", "rotate": 0, "slotId": "image-pi4f3w1e", "caption": {"delta": [{"insert": ""}], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_appearance_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "9ab7f931-37f3-4b9c-bb78-9890eecb71c8",
  },
  {
    id: "IOPFtbQ8vs",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "IOPFtbQ8vs", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768285026681_1aac738b.jpg", "xywh": "[3652.028461195227,-247.02693641437713,400,753.1111111111111]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768285026681_1aac738b.jpg", "prompt": "一个年轻女性角色，3D渲染风格，动漫美学，彩虹渐变长发，从绿色过渡到蓝色再到粉紫色，飘逸流动，刘海遮挡额头，精致五官，大眼睛，粉色眼影，脸颊两侧有蓝绿色装饰性图案/纹身，黑色无袖露脐背心，胸前有小型图案装饰，拉链设计，oversized粉色连帽夹克，袖口宽松，下摆不规则裁剪，肩部和袖子有口袋装饰，浅色阔腿牛仔裤，膝盖和大腿处有破洞，腰部黑色腰带配有粉色装饰，厚底运动鞋，粉白灰配色，高帮设计，粉色鞋带，站姿，左手叉腰，身体略微倾斜，展现自信姿态，全身展示，纯正面面对镜头前。赛博朋克街头风，Y2K美学，未来主义，高饱和度配色，纯白色背景，干净简洁，高质量3D渲染，光影细腻，材质清晰，专业级角色设计。", "rotate": 0, "slotId": "image-8fuqe825", "caption": {"delta": [{"insert": ""}], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_appearance_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "56822f44-29ca-4199-9829-6b4eafad1233",
  },
  {
    id: "P1bMwZ65sr",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "P1bMwZ65sr", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768273678926_6c1e575b.jpg", "xywh": "[2693.2499011098803,3103.2255178518562,400,267]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768273678926_6c1e575b.jpg", "prompt": "人物二穿上人物一的衣服\\n", "rotate": 0, "slotId": "image-3989hd7m", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "reference_to_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "0cc12ea3-6c74-4589-8c37-e8ac99c6c9a2",
  },
  {
    id: "Pev5SL_NkM",
    parentId: "doc:home",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "Pev5SL_NkM", "type": "block", "props": {"title": {"delta": [], "$blocksuite:internal:text$": true}}, "flavour": "affine:page", "version": 2}',
    nodeId: null,
  },
  {
    id: "Sx5OFOTxff",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "Sx5OFOTxff", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/images/oc_reference/1768273520977_4f5867bf.jpg", "xywh": "[793.4894844432142,2651.840101185193,400,442]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "images/oc_reference/1768273520977_4f5867bf.jpg", "prompt": "给上传「人物」添加上传的「丝绒领带」。\\n", "rotate": 0, "slotId": "image-dtukk9s6", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_sculpt_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "74795c87-5f7e-4124-9096-4e7126ff0bba",
  },
  {
    id: "UHvl9qE3i9",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "UHvl9qE3i9", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/images/oc_reference/1768273153404_aeea481d.jpg", "xywh": "[-647.9063488901188,1951.8401011851938,400,333.8918918918919]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "images/oc_reference/1768273153404_aeea481d.jpg", "prompt": "角色人设超详细三视图设计，包含正面视图、侧面视图、背面视图，纯白色背景。展示角色完整的设计规范，超高清晰度呈现、材质质感表现、服装褶皱细节、发丝层次、皮肤光影、饰品光泽与纹理。适用于角色建模与量产规范。画风统一，线条流畅，细节丰富，符合专业人设设定集标准。\\n", "rotate": 0, "slotId": "image-3sdkur6h", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_posture_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "e981a85b-55ab-4b1d-b4db-eae7cf2a85c5",
  },
  {
    id: "Yk85atnj5C",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "Yk85atnj5C", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/images/oc_reference/1768273569225_ec590c66.jpg", "xywh": "[1477.5259427765466,2651.840101185193,400,442]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "images/oc_reference/1768273569225_ec590c66.jpg", "prompt": "请你根据图中的角色生成一个亚克力立牌\\n", "rotate": 0, "slotId": "image-iq9d5ill", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_surroundings_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "1fa5918f-55e1-4d96-b75e-76593296d905",
  },
  {
    id: "cpiD2Lr080",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "cpiD2Lr080", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768275168112_a530dffd.jpg", "xywh": "[793.4894844432142,1620.467454627012,400,753.1111111111111]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768275168112_a530dffd.jpg", "prompt": "中年男性赏金猎人，美式漫画风格，西部朋克融合，深棕色中长发，略显凌乱，侧分，扎低马尾，鬓角留长，脸颊两侧有碎发，沧桑硬汉，深灰色眼睛，眼神冷酷疲惫，眼角有皱纹，浓眉紧锁，高鼻梁略歪，蓄络腮胡修剪整齐，脸上有多处刀疤，肤色风吹日晒的古铜色，深棕色皮质长风衣，高领竖起，肩部有金属铆钉装饰，内穿黑色衬衫配红色围巾，腰间多层子弹带和枪套，深色牛仔裤，棕色牛仔靴配马刺，戴深棕色牛仔帽，帽檐宽大，帽带有骷髅装饰，手戴棕色皮手套指尖露出，双手持左轮手枪，银色枪身，腰间挂第二把枪，对峙姿态，身体侧立，双手交叉持枪指向前方，眼神锐利，风衣下摆飘动，背景荒漠黄昏，仙人掌剪影，红色夕阳，尘土飞扬，棕色、暗红、橙黄夕阳，西部荒野感。", "rotate": 0, "slotId": "image-9nteohel", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_appearance_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "6263bbdb-65ff-47d7-b303-81d63caad450",
  },
  {
    id: "doc:home",
    parentId: null,
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"meta": {"id": "doc:home", "tags": [], "title": "", "createDate": 1768202859414}, "type": "doc"}',
    nodeId: null,
  },
  {
    id: "fHPBIXkrSO",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "fHPBIXkrSO", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768273491865_c2ce56d2.jpg", "xywh": "[61.426984443214224,2651.840101185193,400,753.1111111111111]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768273491865_c2ce56d2.jpg", "prompt": "酷帅男模，暗黑，朋克，灰色皮草，白色宽松简约不规则套装 系红色装饰腰带 绑带，帽子、手套， 复杂精致多层金属扣。黑色靴子 时尚、艺术感，插画风，人物主体刻画细致，服饰设计新潮，帅气姿势，背景突出服装的独特设计与酷飒氛围 。黑色背景。", "rotate": 0, "slotId": "image-ajyf3wt3", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_appearance_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "4af01713-062a-4e00-9ba3-0c322d3b53e2",
  },
  {
    id: "j7xbth7pQ5",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "j7xbth7pQ5", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768273620712_bc18821c.jpg", "xywh": "[2060.0936511098803,3125.1734345185228,400,267]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768273620712_bc18821c.jpg", "prompt": "生成小狗\\n", "rotate": 0, "slotId": "image-7w2fqmms", "caption": {"delta": [], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "text_to_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "be5503bc-b384-471e-9b6c-97f0d4e96752",
  },
  {
    id: "jLksi0RAAB",
    parentId: "ATH5s_d1RN",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "jLksi0RAAB", "type": "block", "props": {"alt": "", "fit": "contain", "url": "//scdn.yidooo.com/user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768284978574_7c975e70.jpg", "xywh": "[2606.1092761098803,552.4694437557714,400,753.1111111111111]", "align": "center", "error": false, "index": "a0", "scale": 1, "title": {"delta": [{"insert": "图片"}], "$blocksuite:internal:text$": true}, "ossKey": "user/7d13965b-4205-4860-b4c7-1423086f5e43/2026-01-13/images/generation/1768284978574_7c975e70.jpg", "prompt": "动漫漫画风格插画，描绘一位美丽的年轻女性，金色波浪长发，明亮的绿色眼睛配修长睫毛，鼻子和脸颊上有雀斑，粉色嘴唇微微张开。她身穿黄色吊带背心，上面点缀着小白菊花图案，佩戴珍珠项链配绿松石宝石吊坠，右手戴银色手镯，右耳戴小巧的金色耳环。她的右手轻轻触摸着头发，背景是深色木墙的室内环境。线条清晰锐利，色彩鲜艳且富有层次感，具有立体的光影效果，高细节，8k画质。", "rotate": 0, "slotId": "image-pg6135gx", "caption": {"delta": [{"insert": ""}], "$blocksuite:internal:text$": true}, "autoSize": false, "funcType": "oc_appearance_image", "minWidth": 400, "minHeight": 232, "lockedBySelf": false, "meta:bizNodeId": "", "keepAspectRatio": true}, "flavour": "yidooo:image", "version": 1}',
    nodeId: "d25e76b8-10ab-4e0e-b0b5-132c65f2dd7f",
  },
  {
    id: "xTC4w0b-V0",
    parentId: "Pev5SL_NkM",
    creationId: "4ec9390e-5503-49d4-8c14-e2ed3947ee1f",
    info: '{"id": "xTC4w0b-V0", "type": "block", "props": {"xywh": "[1997.4738594432138,2711.6786428518562,498,92]", "index": "a0", "title": {"delta": [{"insert": "故事大纲"}], "$blocksuite:internal:text$": true}, "hidden": false, "edgeless": {"style": {"borderSize": 4, "shadowType": "--affine-note-shadow-box", "borderStyle": "none", "borderRadius": 8}}, "markdown": "生成小狗", "background": {"dark": "#252525", "light": "#ffffff"}, "displayMode": "both", "lockedBySelf": false}, "flavour": "affine:note", "version": 1, "children": [{"id": "z5CvvYlxWC", "type": "block", "props": {"text": {"delta": [{"insert": "生成小狗"}], "$blocksuite:internal:text$": true}, "type": "text", "collapsed": false}, "flavour": "affine:paragraph", "version": 1, "children": []}]}',
    nodeId: "bc8f7818-0702-49fd-8697-64d9f9e2bd86",
  },
];

const fs = require("fs");
const path = require("path");
const data1 = require("./b.json");
function parse(items) {
  const map = new Map();
  const roots = [];

  // 递归处理 info.children
  function buildInfoChildren(children, parentId) {
    if (!Array.isArray(children)) return [];

    return children.map((child) => {
      const node = {
        id: child.id,
        parentId: parentId,
        meta: {
          id: child.id,
          parentId: parentId,
          source: "info", // 标记来源
        },
        info: child,
        children: [],
      };

      // 放入 map
      map.set(node.id, node);

      if (Array.isArray(child.children) && child.children.length > 0) {
        node.children = buildInfoChildren(child.children, node.id);
      }

      return node;
    });
  }

  // 1. 创建 items 节点
  items.forEach((item) => {
    let parsedInfo;
    try {
      parsedInfo = JSON.parse(item.info);
    } catch {
      parsedInfo = null;
    }

    const node = {
      id: item.id,
      parentId: item.parentId ?? null,
      meta: {
        id: item.id,
        parentId: item.parentId ?? null,
        creationId: item.creationId,
        nodeId: item.nodeId,
        source: "item",
      },
      info: parsedInfo,
      children: [],
    };

    // 放入 map
    map.set(node.id, node);

    // 处理 info.children
    if (parsedInfo && Array.isArray(parsedInfo.children)) {
      node.children = buildInfoChildren(parsedInfo.children, node.id);
    }
  });

  // 2. 建立 items 之间的父子关系
  map.forEach((node) => {
    // 只处理来源为 item 的 parentId 关系
    if (node.meta.source === "item") {
      if (node.parentId == null) {
        roots.push(node);
      } else {
        const parent = map.get(node.parentId);
        if (parent) {
          parent.children.push(node);
        } else {
          roots.push(node);
        }
      }
    }
  });

  fs.writeFileSync(path.join(__dirname, "./roots.json"), JSON.stringify(roots));

  return { roots, map };
}

const bs = parse(data1);
//习近平大战特离谱
// const fs = data.map((item) => JSON.parse(item.info).props.slotId);
data.forEach((item) => {
  item.info = JSON.parse(item.info);
});
new Map().size;
const fs1 = data.find((item) => item?.info?.id === "EBItcwh4om");
const fs2 = data.find((item) => item?.info?.id === "hiAbZYMzG6");
// console.log(fs.map((item) => item.id));
console.log(fs1);
//'59f06e20-0028-4ae3-803c-b395c876445d'
